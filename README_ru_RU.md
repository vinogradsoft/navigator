<div align="center">
<img alt="Navigator logo" src="banner.svg">
<br/><br/>
</div>
<br/><br/>
<div align="center">
<strong>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</strong>
<br>
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º.
<br /><br />
</div>

<div align="center">

[![codecov](https://codecov.io/gh/vinogradsoft/navigator/graph/badge.svg?token=73PNNFWLG1)](https://codecov.io/gh/vinogradsoft/navigator)
<img src="https://badgen.net/static/license/MIT/green">

</div>

## –ß—Ç–æ —Ç–∞–∫–æ–µ Navigator?

> üëâ Navigator - —ç—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä url. –†–∞–±–æ—Ç–∞–µ—Ç —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–ø–æ—Å–æ–±–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å URL-–∞–¥—Ä–µ—Å–∞ –Ω–∞
> –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã. –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç–æ–≤.
> –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–æ–±–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å URL-–∞–¥—Ä–µ—Å–∞, –Ω–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞—è—Å—å –∫ –¥–æ–º–µ–Ω—É –∏–ª–∏ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é
> –º–∞—Ä—à—Ä—É—Ç–∞.

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –≤ —Å–≤–æ–µ–º –∫–æ–¥–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä
[FastRoute](https://github.com/nikic/FastRoute#fastroute---fast-request-router-for-php). FastRoute –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π, –∞ Navigator —Å–æ–∑–¥–∞–µ—Ç URL-–∞–¥—Ä–µ—Å–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —ç—Ç–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º
–º–∞—Ä—à—Ä—É—Ç–æ–≤.

–î–ª—è –ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–∞ –∫–æ–¥–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º –º–∞—Ä—à—Ä—É—Ç–æ–≤ –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –∏–º–µ–Ω–∞.

```
   –∏–º—è           –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ 
 –º–∞—Ä—à—Ä—É—Ç–∞          –º–∞—Ä—à—Ä—É—Ç–∞
 /‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ\      /‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ\
'user/view' => '/user/{id:\d+}',
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å URL-–∞–¥—Ä–µ—Å–∞–º–∏ –±–µ–∑ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è URL-–∞–¥—Ä–µ—Å–∞
–∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `'user' => '/user/{id:\d+}'`, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

```php 
/** relative url */
echo $urlBuilder->build('/user', ['id' => 100]); # /user/100

/** absolute url */
echo $urlBuilder->build('/user', ['id' => 100], true); # http://mydomain.ru/user/100
```

–ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-–ª–∏–±–æ –ø—Ä–∏—á–∏–Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å –∞–¥—Ä–µ—Å —Å `/user/100` –Ω–∞ `/employee/100`, –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å
–Ω–∞—Å—Ç—Ä–æ–π–∫—É –º–∞—Ä—à—Ä—É—Ç–∞ —Å `'/user/{id:\d+}'` –Ω–∞ `'/employee/{id:\d+}'`. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∫–æ–¥ –≤—ã—à–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π
URL-–∞–¥—Ä–µ—Å `/employee/100` –∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π `http://mydomain.ru/employee/100`.

–í –æ–±—ä–µ–∫—Ç–µ –∫–ª–∞—Å—Å–∞ `Navigator\UrlBuilder` –¥–≤–∞ –º–µ—Ç–æ–¥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ URL: `build` –∏ `buildExternal`. –ú–µ—Ç–æ–¥ `build` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
–¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∞ `buildExternal` —Å–æ–∑–¥–∞–µ—Ç URL –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ
–∞–±—Å–æ–ª—é—Ç–Ω—ã–µ URL-–∞–¥—Ä–µ—Å–∞.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–∏ - —á–µ—Ä–µ–∑ [composer](http://getcomposer.org/download/).

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É

```
php composer require vinogradsoft/navigator "^1.0"
```

–¢—Ä–µ–±—É–µ—Ç—Å—è PHP 8.0 –∏–ª–∏ –Ω–æ–≤–µ–µ.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```php
<?php

use Navigator\ArrayRulesProvider;
use Navigator\UrlBuilder;

require_once dirname(__DIR__, 1) . '/vendor/autoload.php';

$urlBuilder = new UrlBuilder(
    'https://vinograd.soft',
    new ArrayRulesProvider([
        'user' => '/user[/{var_name}]',
        // many other route definitions in key-value format.
    ])
);

echo $urlBuilder->build('/user', null, true), '<br>'; # https://vinograd.soft/user
echo $urlBuilder->build('/user', ['var_name' => 'var_value'], true), '<br>'; # https://vinograd.soft/user/var_value
echo $urlBuilder->build('user', ['var_name' => 'var_value'], true), '<br>';  # https://vinograd.soft/user/var_value
echo $urlBuilder->build('/user', ['var_name' => 'var_value']), '<br>';  # /user/var_value
echo $urlBuilder->build('user', ['var_name' => 'var_value']), '<br>';  # user/var_value
```

## –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–º–µ–µ—Ç —à–µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –ø–æ–∂–∞–ª—É–π —Å–∞–º—ã–µ –≥–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–≤—ã–µ –¥–≤–∞.
–ü–µ—Ä–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –∏–¥–µ—Ç `$baseUrl` - –≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ `'https://vinograd.soft'` - —ç—Ç–æ –±–∞–∑–æ–≤—ã–π URL,
–∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö URL-–∞–¥—Ä–µ—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–í—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä `$rulesProvider` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `Navigator\RulesProvider`.
–í –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `Navigator\ArrayRulesProvider`, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±—ã—á–Ω—ã–º –º–∞—Å—Å–∏–≤–æ–º
–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤. –ü–æ —Å—É—Ç–∏ —ç—Ç–æ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç–æ–≤.

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞ `build`

### –ü–∞—Ä–∞–º–µ—Ç—Ä `$name`

–ü–∞—Ä–∞–º–µ—Ç—Ä–æ–º `$name` –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –∏–º—è –º–∞—Ä—à—Ä—É—Ç–∞. –ù–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–Ω–∏–º–∞–µ—Ç —Å –∫–∞–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º
—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ–≥–æ –≤ URL-–∞–¥—Ä–µ—Å. –í –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–≤–∞ —Å–ª—É—á–∞—è `'user'` –∏ `'/user'`.
–°—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ —Å–∏–º–≤–æ–ª ‚Äú/‚Äù –≤ –Ω–∞—á–∞–ª–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –∏–º–µ–Ω–∏ –Ω–∏–∫–∞–∫ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–∏—Å–∫ –º–∞—Ä—à—Ä—É—Ç–∞, –æ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–µ, —á—Ç–æ
–¥–∞–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω –≤ –Ω–∞—á–∞–ª–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ URL-–∞–¥—Ä–µ—Å–∞. –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —ç—Ç–æ—Ç —Å–∏–º–≤–æ–ª –∑–∞—Ç–µ–º
–æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –ø–æ–∏—Å–∫ –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ –∏–º–µ–Ω–∏, –∏—Å–∫–ª—é—á–∞—è –∏–∑ –Ω–µ–≥–æ –¥–∞–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ ‚Äú/‚Äù –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π –∫–∞–∫
–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–æ–≥–æ, —á—Ç–æ –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∫–ª—é—á–∏—Ç—å –≤ –Ω–∞—á–∞–ª–æ —Ñ–æ—Ä–º–∏—Ä—É–µ–º–æ–≥–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ URL-–∞–¥—Ä–µ—Å–∞.

### –ü–∞—Ä–∞–º–µ—Ç—Ä `$placeholders`

–ú–æ–∂–µ—Ç –±—ã—Ç—å `–º–∞—Å—Å–∏–≤–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π` –∏–ª–∏ `null`.

#### –ú–∞—Å—Å–∏–≤ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π

–ò–∑ –ø—Ä–∏–º–µ—Ä–∞, `$urlBuilder` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –º–∞—Ä—à—Ä—É—Ç–∞ `'/user[/{var_name}]'`, –≥–¥–µ `var_name` —ç—Ç–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è
—á–∞—Å—Ç—å,
–¥—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è.

–í –º–µ—Ç–æ–¥ `build` –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ —Ç–∞–∫–æ–π –º–∞—Å—Å–∏–≤ `['var_name' => 'var_value']`, –≥–¥–µ `'var_name'` –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
–º–∞—Ä—à—Ä—É—Ç–∞, –∞ `'var_value'` –µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç.–µ. —Ç–æ —á–µ–º `'var_name'` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω–∞, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ URL-–∞–¥—Ä–µ—Å–∞ —Ç–∞–∫–æ–π `https://vinograd.soft/user/var_value`.

#### NULL

NULL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–ª—É—á–∞—è—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö URL, –∫–æ—Ç–æ—Ä—ã–º –Ω–µ –Ω—É–∂–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö –ø—É—Ç–∏, —Ç–∞–∫–æ–º—É –∫–∞–∫ —ç—Ç–æ
–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `'user' => '/user'`.

–ü—Ä–∏–º–µ—Ä:

```php
$urlBuilder = new UrlBuilder(
    'https://vinograd.soft',
    new ArrayRulesProvider([
        'user' => '/user/profile',
    ])
);

echo $urlBuilder->build('/user', null, true); # https://vinograd.soft/user/profile
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä `$absolute`

–≠—Ç–æ—Ç –±—É–ª–µ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä —É–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–µ, –∫–∞–∫–æ–π URL-–∞–¥—Ä–µ—Å —Å–æ–∑–¥–∞–≤–∞—Ç—å: –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π. –ü–µ—Ä–µ–¥–∞—á–∞ `true`
–ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —Å–æ–∑–¥–∞–Ω–∏—é –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
—Ä–∞–≤–Ω–æ `false`.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤

–ò–º–µ–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –Ω–µ –∏–º–µ—é—Ç –∂–µ—Å—Ç–∫–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞, –ø–æ—ç—Ç–æ–º—É –∫–∞–∫–∏–µ –¥–∞–≤–∞—Ç—å –∏–º–µ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—Å.
–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç `<–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä>/<–¥–µ–π—Å—Ç–≤–∏–µ>` –ø—Ä–∏–º–µ—Ä: `post/view`.
–ò–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –Ω–∞—á–∞–ª–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è `blog/post/view`.

–í–∞–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å –æ–¥–Ω–æ, –Ω–µ–ª—å–∑—è —á—Ç–æ–±—ã –ø–µ—Ä–≤—ã–º —Å–∏–º–≤–æ–ª–æ–º –±—ã–ª `/`. –¢–∞–∫–æ–µ –∏–º—è –Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ `/blog/post/view` –≤ –º–æ–º–µ–Ω—Ç–µ
–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ URL –º–µ—Ç–æ–¥–æ–º `build`, –º–∞—Ä—à—Ä—É—Ç —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º –Ω–µ –±—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω, –ø–æ—Å–∫–æ–ª—å–∫—É —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –µ–≥–æ –∏—Å–∫–∞—Ç—å –±–µ–∑
—Å–∏–º–≤–æ–ª–∞ `/`
–≤ –Ω–∞—á–∞–ª–µ, –∑–∞—Ç–µ–º –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `Navigator\RoutConfigurationException`.

–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –º–∞—Ä—à—Ä—É—Ç–∞:

```php
new ArrayRulesProvider([
     'blog/post/view' => '/post/{id:\d+}',
]);
```

–ü—Ä–∏–º–µ—Ä **–ù–ï–î–û–ü–£–°–¢–ò–ú–û–ì–û** –∏–º–µ–Ω–∏ –º–∞—Ä—à—Ä—É—Ç–∞:

```php
new ArrayRulesProvider([
      // Not working warrant /blog/post/view
     '/blog/post/view' => '/post/{id:\d+}',
]);
```

> –í –∏–º–µ–Ω–∞—Ö —Å–æ–≤—Å–µ–º –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω —Å–∏–º–≤–æ–ª `/`, –∏–º—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ —Ç–∞–∫–∏–º `blog.post.view` –∏–ª–∏ –∫–∞–∫–∏–º-—Ç–æ –¥—Ä—É–≥–∏–º –Ω–µ –∏–º–µ—é—â–∏–º
> —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π –≤–æ–≤—Å–µ.

–ö–∞–∫ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
[FastRoute](https://github.com/nikic/FastRoute#defining-routes).

## –ó–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–∏

### –°—Ö–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–æ–π –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å, –∑–∞ –∫–∞–∫–æ–π —É—á–∞—Å—Ç–æ–∫ URL-–∞–¥—Ä–µ—Å–∞ –æ—Ç–≤–µ—á–∞–µ—Ç

```
  |------------------------------:src--------------------------------------------------|
  |                                                 :path               ?         #    |
  |                                          /‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ\ /‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ\ /‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ‚Äæ\|
  |http://grigor:password@vinograd.soft:8080/path/to/resource.json?query=value#fragment|
   \__/   \___/  \_____/  \___________/ \__/                  \__/
 :scheme  :user :password    :host      :port                :suffix
```

–ù–µ –≤—Å–µ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –æ–±–æ–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –¢–∞–±–ª–∏—Ü–∞ –Ω–∏–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—è –∏ —Ç–∏–ø
–¥–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è.

| –ó–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å                          | –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–ª—è –º–µ—Ç–æ–¥–∞ `build` | –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–ª—è –º–µ—Ç–æ–¥–∞ `buildExternal` | –¢–∏–ø                                                                   |
|--------------------------------------|:------------------------------:|:--------------------------------------:|:----------------------------------------------------------------------|
| `–Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è` |             **–î–ê**             |                  –ù–ï–¢                   | `string/int`<br> —Ç–∏–ø `bool` - –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–µ–∑ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫`{}`. |
| `:src`                               |              –ù–ï–¢               |                 **–î–ê**                 | `string`                                                              |
| `:scheme`                            |              –ù–ï–¢               |                 **–î–ê**                 | `string`                                                              |
| `:user`                              |              –ù–ï–¢               |                 **–î–ê**                 | `string`                                                              |
| `:password`                          |              –ù–ï–¢               |                 **–î–ê**                 | `string`                                                              |
| `:host`                              |              –ù–ï–¢               |                 **–î–ê**                 | `string`                                                              |
| `:port`                              |              –ù–ï–¢               |                 **–î–ê**                 | `string`                                                              |
| `:path`                              |              –ù–ï–¢               |                 **–î–ê**                 | `string/array`                                                        |
| `:suffix`                            |              –ù–ï–¢               |                 **–î–ê**                 | `string`                                                              |
| `?`                                  |             **–î–ê**             |                 **–î–ê**                 | `string/array`                                                        |
| `#`                                  |             **–î–ê**             |                 **–î–ê**                 | `string`                                                              |
| `:strategy`                          |             **–î–ê**             |                 **–î–ê**                 | `string`                                                              |
| `:idn`                               |             **–î–ê**             |                 **–î–ê**                 | `bool`                                                                |      

## ‚ö° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π

–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º `$urlBuilder` —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

```php
$urlBuilder = new UrlBuilder(
    'https://vinograd.soft',
    new ArrayRulesProvider([
        'user' => '/user[/{var_name}]',
        'about' => '/about[.html]',
    ])
);
```

### **üëâ –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è**

> –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è—Ö –Ω–µ –æ–±—Ä–∞–º–ª–µ–Ω–Ω—ã–µ –≤ —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ –∏–º–µ—é—Ç —Ç–∏–ø –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—è `bool`.

#### **–ü—Ä–∏–º–µ—Ä 1.**

–°—Ç—Ä–∞–Ω–∏—Ü–∞ "about" –∏–º–µ–µ—Ç –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Å—É—Ñ—Ñ–∏–∫—Å - –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `.html` –±–µ–∑ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫. –¢—Ä–µ–±—É–µ—Ç—Å—è
—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å URL —Å —ç—Ç–∏–º —Å—É—Ñ—Ñ–∏–∫—Å–æ–º.

```php
echo $urlBuilder->build('about', ['.html' => true], true); # https://vinograd.soft/about.html
```

#### **–ü—Ä–∏–º–µ—Ä 2.**

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π URL-–∞–¥—Ä–µ—Å –∏—Å–ø–æ–ª—å–∑—É—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `'user' => '/user[/{var_name}]'`.

```php
echo $urlBuilder->build('/user', ['var_name' => 'my_unique_value'], true); 
# https://vinograd.soft/user/my_unique_value
```

#### **–ü—Ä–∏–º–µ—Ä 3.**

–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π URL-–∞–¥—Ä–µ—Å —Å —Å–∏–º–≤–æ–ª–æ–º `/` –≤ –Ω–∞—á–∞–ª–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
`'user' => '/user[/{var_name}]'`.

```php
echo $urlBuilder->build('/user', ['var_name' => 'my_unique_value']); # /user/my_unique_value
```

#### **–ü—Ä–∏–º–µ—Ä 4.**

–°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π URL-–∞–¥—Ä–µ—Å –±–µ–∑ —Å–∏–º–≤–æ–ª–∞ `/` –≤ –Ω–∞—á–∞–ª–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `'user' => '/user[/{var_name}]'`.

```php
echo $urlBuilder->build('user', ['var_name' => 'my_unique_value']); # user/my_unique_value
```

#### **–ü—Ä–∏–º–µ—Ä 5.**

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `'user' => '/user[/{var_name}]'` –∏–º–µ–µ—Ç –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `var_name`. –ù—É–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–π
URL-–∞–¥—Ä–µ—Å –±–µ–∑ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞.

```php
echo $urlBuilder->build('user', null, true); # https://vinograd.soft/user
```

---

### **üëâ :src**

#### **–ü—Ä–∏–º–µ—Ä 1.**

–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ –∫–æ—Ç–æ—Ä—É—é –∑–∞–ø–∏—Å–∞–Ω URL-–∞–¥—Ä–µ—Å –≤–Ω–µ—à–Ω–µ–≥–æ —Ä–µ—Å—É—Ä—Å–∞. –ù—É–∂–Ω–æ –≤–Ω–µ—Å—Ç–∏ –≤ URL-–∞–¥—Ä–µ—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ
–∏–∑–º–µ–Ω–µ–Ω–∏–π:

+ –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ —Å—Ö–µ–º—É —Å `http` –Ω–∞ `ftp`
+ –¥–æ–±–∞–≤–∏—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `grigor` –∏ –ø–∞—Ä–æ–ª—å `password123`
+ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –Ω–∞ `21`.

```php
$externalAddress = 'http://another.site:8080/path/to/resource';
echo $urlBuilder->buildExternal([
    ':src' => $externalAddress,
    ':scheme' => 'ftp',
    ':user' => 'grigor',
    ':password' => 'password123',
    ':port' => '21'
]);
# ftp://grigor:password123@another.site:21/path/to/resource
```

#### **–ü—Ä–∏–º–µ—Ä 2.**

–î–æ–±–∞–≤—å—Ç–µ –ø—É—Ç—å `blog/post/41` –∫ URL-–∞–¥—Ä–µ—Å—É –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥—Ä—É–≥–æ–≥–æ —Å–∞–π—Ç–∞ `http://another.site`.

```php
echo $urlBuilder->buildExternal([
    ':src' => 'http://another.site',
    ':path' => ['blog', 'post', 41],
]);
# http://another.site/blog/post/41
```

---

### **üëâ :scheme**

#### **–ü—Ä–∏–º–µ—Ä 1.**

–ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ö–µ–º—É URL-–∞–¥—Ä–µ—Å–∞ `http://another.site` —Å `http` –Ω–∞ `https`.

```php
echo $urlBuilder->buildExternal([
    ':src' => 'http://another.site',
    ':scheme' => 'https',
]);
# https://another.site
```

#### **–ü—Ä–∏–º–µ—Ä 2.**

–°–æ–∑–¥–∞–π—Ç–µ URL-–∞–¥—Ä–µ—Å `https://another.site/path/to/resource` –∏–∑ –∏–º–µ—é—â–∏—Ö—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —á–∞—Å—Ç–µ–π —Å–æ —Å—Ö–µ–º–æ–π `https`.

```php
echo $urlBuilder->buildExternal([
    ':scheme' => 'https',
    ':host' => 'another.site',
    ':path' => ['path', 'to', 'resource'],
]);
# https://another.site/path/to/resource
```

---

### **üëâ :user**

#### **–ü—Ä–∏–º–µ—Ä.**

–î–æ–±–∞–≤—å—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `user` –¥–ª—è URL-–∞–¥—Ä–µ—Å–∞ `http://another.site`.

```php
echo $urlBuilder->buildExternal([
    ':src' => 'http://another.site',
    ':user' => 'user'
]);
# http://user@another.site
```

---

### **üëâ :password**

> –≠—Ç–æ—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ø–∞—Ä–µ —Å –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º `:user`. –ß–∞—Å—Ç—å `:user` –ª–∏–±–æ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∏—Å—Ö–æ–¥–Ω–æ–º
> URL-–∞–¥—Ä–µ—Å–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–º –≤ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ `:src`, –ª–∏–±–æ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –ø–∞—Ä–µ —Å –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º `:password`, –µ—Å–ª–∏ `:user`
> –≤ URL –µ–≥–æ –Ω–µ –æ–∫–∞–∂–µ—Ç—Å—è, –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `Navigator\BadParameterException`.

#### **–ü—Ä–∏–º–µ—Ä.**

–î–æ–±–∞–≤—å—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `grigor` –∏ –ø–∞—Ä–æ–ª—å `password123` –¥–ª—è URL-–∞–¥—Ä–µ—Å–∞ `ftp://another.site:21`.

```php
echo $urlBuilder->buildExternal([
    ':src' => 'ftp://another.site:21',
    ':user' => 'grigor',
    ':password' => 'password123'
]);
# ftp://grigor:password123@another.site:21
```

---

### **üëâ :host**

> –ó–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å `:host` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–∞—Ä–µ —Å –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º `:scheme`. –í —Å–ª—É—á–∞–µ –∫–æ–≥–¥–∞ –≤—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
> –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å `:src`, —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å URL-–∞–¥—Ä–µ—Å –∏–∑ —á–∞—Å—Ç–µ–π, —Ç–æ `:host` –∏ `':scheme'` –±—É–¥—É—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏, –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏
> –ª—é–±–æ–≥–æ –∏–∑ –Ω–∏—Ö –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `Navigator\BadParameterException`. `:host` –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å
> –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤–æ–π —É—á–∞—Å—Ç–æ–∫ –≤ URL-–∞–¥—Ä–µ—Å–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º `:src`.

#### **–ü—Ä–∏–º–µ—Ä.**

–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å URL-–∞–¥—Ä–µ—Å `http://another.site`.

```php
echo $urlBuilder->buildExternal([
    ':scheme' => 'http',
    ':host' => 'another.site'
]);
# http://another.site
```

---

### **üëâ :port**

#### **–ü—Ä–∏–º–µ—Ä.**

–°–æ–∑–¥–∞–π—Ç–µ URL-–∞–¥—Ä–µ—Å `http://another.site` —Å –ø–æ—Ä—Ç–æ–º `5000`.

```php
echo $urlBuilder->buildExternal([
    ':scheme' => 'http',
    ':host' => 'another.site',
    ':port' => '5000'
]);
# http://another.site:5000
```

---

### **üëâ :path**

#### **–ü—Ä–∏–º–µ—Ä 1.**

–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å URL-–∞–¥—Ä–µ—Å `https://another.site/path/to` –∏—Å–ø–æ–ª—å–∑—É—è –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—è —Å —Ç–∏–ø–æ–º `array`.

```php
echo $urlBuilder->buildExternal([
    ':src' => 'https://another.site',
    ':path' => ['path', 'to']
]);
# https://another.site/path/to
``` 

#### **–ü—Ä–∏–º–µ—Ä 2.**

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ URL-–∞–¥—Ä–µ—Å `https://another.site/path/to` –∏—Å–ø–æ–ª—å–∑—É—è –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—è —Å —Ç–∏–ø–æ–º `string`.

```php
echo $urlBuilder->buildExternal([
    ':src' => 'https://another.site',
    ':path' => 'path/to'
]);
# https://another.site/path/to
``` 

---

### **üëâ :suffix**

> –° —Å—É—Ñ—Ñ–∏–∫—Å–∞–º–∏ –µ—Å—Ç—å –æ–¥–∏–Ω –Ω—é–∞–Ω—Å, –µ—Å–ª–∏ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ URL-–∞–¥—Ä–µ—Å —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—è `:src` –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ
> –µ–≥–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º `:suffix`, –≤—ã –º–æ–∂–µ—Ç–µ –µ–≥–æ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å, –ø–æ—Å–∫–æ–ª—å–∫—É —Å—É—Ñ—Ñ–∏–∫—Å–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–∞—è —Å—Ç–æ–∫–∞,
> –æ–Ω –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –±—É–¥–µ—Ç —è–≤–ª—è—Ç—å—Å—è —á–∞—Å—Ç—å—é path.

#### **–ü—Ä–∏–º–µ—Ä 1.**

–î–æ–±–∞–≤—å—Ç–µ –∫ URL-–∞–¥—Ä–µ—Å—É `https://another.site/path/to` —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.html`.

```php
echo $urlBuilder->buildExternal([
    ':src' => 'https://another.site',
    ':path' => 'path/to',
    ':suffix' => '.html'
]);
# https://another.site/path/to.html
``` 

#### **–ü—Ä–∏–º–µ—Ä 2.**

–î–æ–±–∞–≤—å—Ç–µ —Å—É—Ñ—Ñ–∏–∫—Å `-city` –∫ URL-–∞–¥—Ä–µ—Å—É `https://another.site/path/to?q=value#news`.

```php
echo $urlBuilder->buildExternal([
    ':src' => 'https://another.site/path/to?q=value#news',
    ':suffix' => '-city'
]);
# https://another.site/path/to-city?q=value#news
``` 

---

### **üëâ –ó–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å `?`**

#### **–ü—Ä–∏–º–µ—Ä 1.**

–î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `s` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `Hello world` URL-–∞–¥—Ä–µ—Å—É `https://another.site`.

```php
echo $urlBuilder->buildExternal([':src' => 'https://another.site', '?' => ['s' => 'Hello world']]);
# https://another.site/?s=Hello%20world
```  

#### **–ü—Ä–∏–º–µ—Ä 2.**

–í —Å–∏—Å—Ç–µ–º–µ –µ—Å—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `s=Hello world` –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –∫ URL-–∞–¥—Ä–µ—Å—É `https://another.site`.

```php
echo $urlBuilder->buildExternal([
    ':src' => 'https://another.site',
    '?' => 's=Hello world'
]);
# https://another.site/?s=Hello%20world
```  

#### **–ü—Ä–∏–º–µ—Ä 3.**

–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å URL-–∞–¥—Ä–µ—Å –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥—Ä—É–≥–æ–≥–æ —Å–∞–π—Ç–∞ `https://another.site` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏
–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```php
    [
        'search' => [
            'blog' => [
                'category' => 'news',
                'author' => 'Grigor'
            ]
        ]
    ]
```

–ö–æ–¥:

```php
echo $urlBuilder->buildExternal([
    ':src' => 'https://another.site',
    '?' => [
        'search' => [
            'blog' => [
                'category' => 'news',
                'author' => 'Grigor'
            ]
        ]
    ]
]);
# https://another.site/?search%5Bblog%5D%5Bcategory%5D=news&search%5Bblog%5D%5Bauthor%5D=Grigor
```  

---

### **üëâ –ó–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å `#`**

#### **–ü—Ä–∏–º–µ—Ä 1.**

–ó–∞–¥–∞—á–∞ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `vinogradsoft/compass`, –ø–∞—Ä–∞–≥—Ä–∞—Ñ `quick-start`.

```php
echo $urlBuilder->buildExternal([
    ':src' => 'https://github.com/vinogradsoft/compass',
    '#' => 'quick-start'
]);
# https://github.com/vinogradsoft/compass#quick-start
```

---

### **üëâ :strategy**

> –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å–æ–∑–¥–∞–Ω–∏—è URL-–∞–¥—Ä–µ—Å–æ–≤ –Ω—É–∂–Ω–æ –ª–∏–±–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Compass\UrlStrategy`,
> –ª–∏–±–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç –∫–ª–∞—Å—Å–∞ `Compass\DefaultUrlStrategy`. –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –æ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —Ä–∞–±–æ—Ç—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å
> –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
> [Compass](https://github.com/vinogradsoft/compass/blob/master/README-ru_RU.md#%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%B5%D0%B3%D0%B8%D0%B8-%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F).

#### **–ü—Ä–∏–º–µ—Ä 1.**

–ó–∞–¥–∞—á–∞ —Å–¥–µ–ª–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ URL-–∞–¥—Ä–µ—Å–æ–≤ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `refid` —Ä–∞–≤–Ω–æ–º—É `222`.

–ö–æ–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:

```php
<?php

namespace <your namespace>;

use Compass\DefaultUrlStrategy;
use Compass\Url;

class ReferralUrlStrategy extends DefaultUrlStrategy
{

    /**
     * @inheritDoc
     */
    public function updateQuery(array $items): string
    {
        $items['refid'] = 222;
        return http_build_query($items, '', '&', PHP_QUERY_RFC3986);
    }

    /**
     * @inheritDoc
     */
    public function forceUnlockMethod(
        bool    &$schemeState,
        int     &$authoritySate,
        int     &$relativeUrlState,
        array   $items,
        array   $pathItems,
        array   $queryItems,
        bool    $updateAbsoluteUrl,
        ?string $suffix = null
    ): void
    {
        $relativeUrlState &= ~Url::QUERY_STATE;
    }

}
```

–î–æ–±–∞–≤–∏–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `$urlBuilder`:

```php
$urlBuilder = new UrlBuilder(
    'https://vinograd.soft',
    new ArrayRulesProvider([
        'user' => '/user[/{var_name}]'
    ]),
    ['referral' => new ReferralUrlStrategy()]
);
```

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º URL-–∞–¥—Ä–µ—Å:

```php
echo $urlBuilder->buildExternal([
    ':src' => 'https://another.site/path/to/resource',
    ':strategy' => 'referral'
]);
# https://another.site/path/to/resource?refid=222
```

#### **–ü—Ä–∏–º–µ—Ä 2.**

–í–æ–∑—å–º–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–∑ –ü—Ä–∏–º–µ—Ä–∞ 1 —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞, –∏ —Å–¥–µ–ª–∞–µ–º –µ–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–Ω–µ—à–Ω–∏—Ö URL-–∞–¥—Ä–µ—Å–æ–≤.

–ó–∞–º–µ–Ω–∏–º –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–µ –∫–ª–∞—Å—Å–∞ `Compass\Url` —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏ –ø–µ—Ä–µ–¥–∞–¥–∏–º –µ–≥–æ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–∞—à–µ–≥–æ `$urlBuilder` –ø—è—Ç—ã–º
–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º (`$externalUrl`):

```php
$externalUrl = Url::createBlank();
$externalUrl->setUpdateStrategy(new ReferralUrlStrategy());

$urlBuilder = new UrlBuilder(
    'https://vinograd.soft',
    new ArrayRulesProvider([
        'user' => '/user[/{var_name}]'
    ]),
    [],
    null,
    $externalUrl
);
```

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º URL-–∞–¥—Ä–µ—Å:

```php
echo $urlBuilder->buildExternal([
    ':src' => 'https://another.site/path/to/resource'
]);
# https://another.site/path/to/resource?refid=222
```

---

### **üëâ :idn**

#### **–ü—Ä–∏–º–µ—Ä 1.**

–ó–∞–¥–∞—á–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å URL-–∞–¥—Ä–µ—Å `https://—Ä–æ—Å—Å–∏—è.—Ä—Ñ` –≤ panycode.

```php
echo $urlBuilder->buildExternal([':src' => 'https://—Ä–æ—Å—Å–∏—è.—Ä—Ñ', ':idn' => true]);
# https://xn--h1alffa9f.xn--p1ai
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

``` php composer tests ```

## –°–æ–¥–µ–π—Å—Ç–≤–∏–µ

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–º–æ—Ç—Ä–∏—Ç–µ [–í–ö–õ–ê–î](CONTRIBUTING.md) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è
–ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–õ–∏—Ü–µ–Ω–∑–∏—è MIT (MIT). –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–º–æ—Ç—Ä–∏—Ç–µ [—Ñ–∞–π–ª –ª–∏—Ü–µ–Ω–∑–∏–∏](LICENSE) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.